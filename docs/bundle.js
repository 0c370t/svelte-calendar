var SvelteCalendar=function(){"use strict";function t(t,e){var n=arguments;if(null==t)throw new TypeError("Cannot convert first argument to object");for(var i=Object(t),r=1;r<arguments.length;r++){var s=n[r];if(null!=s)for(var a=Object.keys(Object(s)),o=0,h=a.length;o<h;o++){var c=a[o],l=Object.getOwnPropertyDescriptor(s,c);void 0!==l&&l.enumerable&&(i[c]=s[c])}}return i}var e=function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})};function n(){}function i(t,e){for(var n in e)t[n]=e[n];return t}function r(t,e){for(var n in e)t[n]=1;return t}function s(t,e){return 0===e&&t(),function(){--e||t()}}function a(t){t()}function o(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n)}function c(t){t.parentNode.removeChild(t)}function l(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}function u(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(){return document.createDocumentFragment()}function f(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function m(t,e,n,i){t.addEventListener(e,n,i)}function v(t,e,n,i){t.removeEventListener(e,n,i)}function p(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function y(t,e){t.data=""+e}function b(t,e,n){t.style.setProperty(e,n)}function _(t,e,n){t.classList[n?"add":"remove"](e)}function k(t){return t}function M(t,e,i,r,s){var o,h,c,l=i.call(t,e,r),u=!1;return{t:s?0:1,running:!1,program:null,pending:null,run:function(t,e){var n=this;"function"==typeof l?w.wait().then(function(){l=l(),n._run(t,e)}):this._run(t,e)},_run:function(t,i){o=l.duration||300,h=l.easing||k;var r={start:window.performance.now()+(l.delay||0),b:t,callback:i||n};s&&!u&&(l.css&&l.delay&&(c=e.style.cssText,e.style.cssText+=l.css(0,1)),l.tick&&l.tick(0,1),u=!0),t||(r.group=D.current,D.current.remaining+=1),l.delay?this.pending=r:this.start(r),this.running||(this.running=!0,w.add(this))},start:function(n){if(t.fire((n.b?"intro":"outro")+".start",{node:e}),n.a=this.t,n.delta=n.b-n.a,n.duration=o*Math.abs(n.b-n.a),n.end=n.start+n.duration,l.css){l.delay&&(e.style.cssText=c);var i=function(t,e,n){for(var i=t.a,r=t.b,s=t.delta,a=16.666/t.duration,o="{\n",h=0;h<=1;h+=a){var c=i+s*e(h);o+=100*h+"%{"+n(c,1-c)+"}\n"}return o+"100% {"+n(r,1-r)+"}\n}"}(n,h,l.css);w.addRule(i,n.name="__svelte_"+function(t){for(var e=5381,n=t.length;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(i)),e.style.animation=(e.style.animation||"").split(", ").filter(function(t){return t&&(n.delta<0||!/__svelte/.test(t))}).concat(n.name+" "+n.duration+"ms linear 1 forwards").join(", ")}this.program=n,this.pending=null},update:function(t){var e=this.program;if(e){var n=t-e.start;this.t=e.a+e.delta*h(n/e.duration),l.tick&&l.tick(this.t,1-this.t)}},done:function(){var n=this.program;this.t=n.b,l.tick&&l.tick(this.t,1-this.t),t.fire((n.b?"intro":"outro")+".end",{node:e}),n.b||n.invalidated?l.css&&w.deleteRule(e,n.name):(n.group.callbacks.push(function(){n.callback(),l.css&&w.deleteRule(e,n.name)}),0==--n.group.remaining&&n.group.callbacks.forEach(a)),this.running=!!this.pending},abort:function(t){this.program&&(t&&l.tick&&l.tick(1,0),l.css&&w.deleteRule(e,this.program.name),this.program=this.pending=null,this.running=!1)},invalidate:function(){this.program&&(this.program.invalidated=!0)}}}var D={};var w={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},promise:null,add:function(t){this.transitions.push(t),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function(t,e){if(!this.stylesheet){var n=f("style");document.head.appendChild(n),w.stylesheet=n.sheet}this.activeRules[e]||(this.activeRules[e]=!0,this.stylesheet.insertRule("@keyframes "+e+" "+t,this.stylesheet.cssRules.length))},next:function(){this.running=!1;for(var t=window.performance.now(),e=this.transitions.length;e--;){var n=this.transitions[e];n.program&&t>=n.program.end&&n.done(),n.pending&&t>=n.pending.start&&n.start(n.pending),n.running?(n.update(t),this.running=!0):n.pending||this.transitions.splice(e,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(var i=this.stylesheet.cssRules.length;i--;)this.stylesheet.deleteRule(i);this.activeRules={}}},deleteRule:function(t,e){t.style.animation=t.style.animation.split(", ").filter(function(t){return t&&-1===t.indexOf(e)}).join(", ")},wait:function(){return w.promise||(w.promise=Promise.resolve(),w.promise.then(function(){w.promise=null})),w.promise}};function O(t,e){t.o(function(){!function(t,e){t.d(1),e[t.key]=null}(t,e)})}function x(){return Object.create(null)}function S(t){t._lock=!0,I(t._beforecreate),I(t._oncreate),I(t._aftercreate),t._lock=!1}function C(t,e){t._handlers=x(),t._slots=x(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function I(t){for(;t&&t.length;)t.shift()()}var N={destroy:function(t){this.destroy=n,this.fire("destroy"),this.set=n,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var i=0;i<n.length;i+=1){var r=n[i];if(!r.__calling)try{r.__calling=!0,r.call(this,e)}finally{r.__calling=!1}}},on:function(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(i({},t)),this.root._lock||S(this.root)},_recompute:n,_set:function(t){var e=this._state,n={},r=!1;for(var s in t=i(this._staged,t),this._staged={},t)this._differs(t[s],e[s])&&(n[s]=r=!0);r&&(this._state=i(i({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e})))},_stage:function(t){i(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}},T=[{name:"January",abbrev:"Jan"},{name:"February",abbrev:"Feb"},{name:"March",abbrev:"Mar"},{name:"April",abbrev:"Apr"},{name:"May",abbrev:"May"},{name:"June",abbrev:"Jun"},{name:"July",abbrev:"Jul"},{name:"August",abbrev:"Aug"},{name:"September",abbrev:"Sep"},{name:"October",abbrev:"Oct"},{name:"November",abbrev:"Nov"},{name:"December",abbrev:"Dec"}],H=[{name:"Sunday",abbrev:"Sun"},{name:"Monday",abbrev:"Mon"},{name:"Tuesday",abbrev:"Tue"},{name:"Wednesday",abbrev:"Wed"},{name:"Thursday",abbrev:"Thu"},{name:"Friday",abbrev:"Fri"},{name:"Saturday",abbrev:"Sat"}],Y=function(t,e,n){var i=new Date(e,t,1);i.setDate(i.getDate()-i.getDay());for(var r=11==t?0:t+1,s=[];i.getMonth()!=r||0!=i.getDay()||6!=s.length;)0==i.getDay()&&s.unshift({days:[],id:""+e+t+e+s.length}),s[0].days.push(Object.assign({},{partOfMonth:i.getMonth()==t,date:new Date(i)},n(i))),i.setDate(i.getDate()+1);return s.reverse(),{month:t,year:e,weeks:s}},F=function(t,e,n){var i=new Date;return i.setHours(0,0,0,0),function(r){return{selectable:r>=t&&r<=e&&(!n||n(r)),isToday:r.getTime()==i.getTime()}}};var j=function(t,e){return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()},E=function(t,e,n){return t.replace(new RegExp("#{"+e+"}","g"),n)},A=function(t,e,n){if(t=t.toString(),void 0===e)return t;if(t.length==e)return t;if(n=void 0!==n&&n,t.length<e)for(;e-t.length>0;)t="0"+t;else t.length>e&&(t=n?t.substring(t.length-e):t.substring(0,e));return t},L={daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"]},R=[{key:"d",method:function(t){return A(t.getDate(),2)}},{key:"D",method:function(t){return A(L.daysOfWeek[t.getDay()],3)}},{key:"j",method:function(t){return t.getDate()}},{key:"l",method:function(t){return L.daysOfWeek[t.getDay()]}},{key:"F",method:function(t){return L.monthsOfYear[t.getMonth()]}},{key:"m",method:function(t){return A(t.getMonth()+1,2)}},{key:"M",method:function(t){return A(L.monthsOfYear[t.getMonth()],3)}},{key:"n",method:function(t){return t.getMonth()+1}},{key:"Y",method:function(t){return t.getFullYear()}},{key:"y",method:function(t){return A(t.getFullYear(),2,!0)}}],q=[{key:"a",method:function(t){return t.getHours()>11?"pm":"am"}},{key:"A",method:function(t){return t.getHours()>11?"PM":"AM"}},{key:"g",method:function(t){return t.getHours()%12||12}},{key:"G",method:function(t){return t.getHours()}},{key:"h",method:function(t){return A(t.getHours()%12||12,2)}},{key:"H",method:function(t){return A(t.getHours(),2)}},{key:"i",method:function(t){return A(t.getMinutes(),2)}},{key:"s",method:function(t){return A(t.getSeconds(),2)}}],W=function(t,e){return void 0===e&&(e="#{m}/#{d}/#{Y}"),R.forEach(function(n){-1!=e.indexOf("#{"+n.key+"}")&&(e=E(e,n.key,n.method(t)))}),q.forEach(function(n){-1!=e.indexOf("#{"+n.key+"}")&&(e=E(e,n.key,n.method(t)))}),e},V={left:37,up:38,right:39,down:40,pgup:33,pgdown:34,enter:13,escape:27,tab:9},J=Object.keys(V).map(function(t){return V[t]});function P(t){var e=t-1;return e*e*e+1}function X(t,e){var n=e.delay;void 0===n&&(n=0);var i=e.duration;void 0===i&&(i=400);var r=+getComputedStyle(t).opacity;return{delay:n,duration:i,css:function(t){return"opacity: "+t*r}}}function z(t,e){var n=e.delay;void 0===n&&(n=0);var i=e.duration;void 0===i&&(i=400);var r=e.easing;void 0===r&&(r=P);var s=e.x;void 0===s&&(s=0);var a=e.y;void 0===a&&(a=0);var o=getComputedStyle(t),h=+o.opacity,c="none"===o.transform?"":o.transform;return{delay:n,duration:i,easing:r,css:function(t){return"\n\t\t\ttransform: "+c+" translate("+(1-t)*s+"px, "+(1-t)*a+"px);\n\t\t\topacity: "+t*h}}}function B(t){var e=this._svelte,n=e.component,i=e.ctx;n.fire("dateSelected",i.day.date)}function K(t,e,n){var i=Object.create(t);return i.day=e[n],i}function G(t,e){var n,i,r,s,a=e.day.date.getDate();return{c:function(){n=f("div"),i=f("button"),r=g(a),s=g("\r\n    "),i._svelte={component:t,ctx:e},m(i,"click",B),i.className="day--label svelte-ae4xu3",_(i,"selected",j(e.day.date,e.selected)),_(i,"highlighted",j(e.day.date,e.highlighted)),_(i,"shake-date",e.shakeDate&&j(e.day.date,e.shakeDate)),_(i,"disabled",!e.day.selectable),n.className="day svelte-ae4xu3",_(n,"outside-month",!e.day.partOfMonth),_(n,"is-today",e.day.isToday),_(n,"is-disabled",!e.day.selectable)},m:function(t,e){h(t,n,e),o(n,i),o(i,r),o(n,s)},p:function(t,s){e=s,t.days&&a!==(a=e.day.date.getDate())&&y(r,a),i._svelte.ctx=e,(t.days||t.selected)&&_(i,"selected",j(e.day.date,e.selected)),(t.days||t.highlighted)&&_(i,"highlighted",j(e.day.date,e.highlighted)),(t.shakeDate||t.days)&&_(i,"shake-date",e.shakeDate&&j(e.day.date,e.shakeDate)),t.days&&(_(i,"disabled",!e.day.selectable),_(n,"outside-month",!e.day.partOfMonth),_(n,"is-today",e.day.isToday),_(n,"is-disabled",!e.day.selectable))},d:function(t){t&&c(n),v(i,"click",B)}}}function Q(t){C(this,t),this._state=i({},t.data),this._intro=!!t.intro,this._fragment=function(t,e){for(var n,i,r,s,a=e.days,o=[],l=0;l<a.length;l+=1)o[l]=G(t,K(e,a,l));return{c:function(){n=f("div");for(var t=0;t<o.length;t+=1)o[t].c();n.className="week svelte-ae4xu3"},m:function(t,e){h(t,n,e);for(var i=0;i<o.length;i+=1)o[i].m(n,null);s=!0},p:function(e,i){if(e.days||e.selected||e.highlighted||e.shakeDate){a=i.days;for(var r=0;r<a.length;r+=1){var s=K(i,a,r);o[r]?o[r].p(e,s):(o[r]=G(t,s),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=a.length}},i:function(a,o){s||(i&&i.abort(1),r&&r.abort(1),t.root._intro&&t.root._aftercreate.push(function(){(i=M(t,n,z,{x:50*e.direction,duration:180,delay:90},!0)).run(1)}),r&&r.abort(1),this.m(a,o))},o:function(e){s&&((r=M(t,n,X,{duration:180},!1)).run(0,e),s=!1)},d:function(t){t&&c(n),u(o,t),t&&r&&r.abort()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),S(this)),this._intro=!0}i(Q.prototype,N);var U=0;function Z(t,e,n){var i=Object.create(t);return i.week=e[n],i}function $(t,e){for(var n,i,r=[],a=x(),o=e.visibleMonth.weeks,l=function(t){return t.week.id},u=0;u<o.length;u+=1){var d=Z(e,o,u),g=l(d);r[u]=a[g]=tt(t,g,d)}return{c:function(){for(n=f("div"),u=0;u<r.length;u+=1)r[u].c();n.className="month-container svelte-1y5dcxc"},m:function(t,e){for(h(t,n,e),u=0;u<r.length;u+=1)r[u].i(n,null);i=!0},p:function(e,i){var s=i.visibleMonth.weeks;D.current={remaining:0,callbacks:[]},r=function(t,e,n,i,r,s,a,o,h,c,l,u,d,f){for(var g=t.length,m=a.length,v=g,p={};v--;)p[t[v].key]=v;var y=[],b={},_={};for(v=m;v--;){var k=f(s,a,v),M=i(k),D=o[M];D?r&&D.p(n,k):(D=l(e,M,k)).c(),y[v]=b[M]=D,M in p&&(_[M]=Math.abs(v-p[M]))}var w={},O={};function x(t){t[u](h,d),o[t.key]=t,d=t.first,m--}for(;g&&m;){var S=y[m-1],C=t[g-1],I=S.key,N=C.key;S===C?(d=S.first,g--,m--):b[N]?!o[I]||w[I]?x(S):O[N]?g--:_[I]>_[N]?(O[I]=!0,x(S)):(w[N]=!0,g--):(c(C,o),g--)}for(;g--;)b[(C=t[g]).key]||c(C,o);for(;m;)x(y[m-1]);return y}(r,t,e,l,1,i,s,a,n,O,tt,"i",null,Z)},i:function(t,e){i||this.m(t,e)},o:function(t){if(i){var e=s(t,r.length);for(u=0;u<r.length;u+=1)r[u].o(e);i=!1}},d:function(t){for(t&&c(n),u=0;u<r.length;u+=1)r[u].d()}}}function tt(t,e,n){var i,r,s={days:n.week.days,selected:n.selected,start:n.start,end:n.end,highlighted:n.highlighted,shakeDate:n.shakeDate,direction:n.direction},a=new Q({root:t.root,store:t.store,data:s});return a.on("dateSelected",function(e){t.fire("dateSelected",e)}),{key:e,first:null,c:function(){i=document.createComment(""),a._fragment.c(),this.first=i},m:function(t,e){h(t,i,e),a._mount(t,e),r=!0},p:function(t,e){var n={};t.visibleMonth&&(n.days=e.week.days),t.selected&&(n.selected=e.selected),t.start&&(n.start=e.start),t.end&&(n.end=e.end),t.highlighted&&(n.highlighted=e.highlighted),t.shakeDate&&(n.shakeDate=e.shakeDate),t.direction&&(n.direction=e.direction),a._set(n)},i:function(t,e){r||this.m(t,e)},o:function(t){r&&(a&&a._fragment.o(t),r=!1)},d:function(t){t&&c(i),a.destroy(t)}}}function et(t){C(this,t),this._state=i({monthDict:T},t.data),this._recompute({id:1},this._state),this._intro=!!t.intro,this._fragment=$(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),S(this)),this._intro=!0}i(et.prototype,N),et.prototype._recompute=function(t,e){var n,i;t.id&&this._differs(e.direction,e.direction=(n=e.id,i=U<n?1:-1,U=n,i))&&(t.direction=!0)};function nt(t){var e=this._svelte,n=e.component,i=e.ctx;n.monthSelected(t,i.index)}function it(t,e,n){var i=Object.create(t);return i.monthDefinition=e[n],i.index=n,i}function rt(t,e){var n,i,r,s,a=e.monthDefinition.abbrev;return{c:function(){n=f("div"),i=f("span"),r=g(a),s=g("\r\n      "),i.className="svelte-156fqs2",n._svelte={component:t,ctx:e},m(n,"click",nt),n.className="month-selector--month svelte-156fqs2",_(n,"selected",e.index==e.month),_(n,"selectable",e.monthDefinition.selectable)},m:function(t,e){h(t,n,e),o(n,i),o(i,r),o(n,s)},p:function(t,i){e=i,t.availableMonths&&a!==(a=e.monthDefinition.abbrev)&&y(r,a),n._svelte.ctx=e,t.month&&_(n,"selected",e.index==e.month),t.availableMonths&&_(n,"selectable",e.monthDefinition.selectable)},d:function(t){t&&c(n),v(n,"click",nt)}}}function st(t){C(this,t),this._state=i({monthDict:T,monthSelectorOpen:!1},t.data),this._recompute({monthDict:1,start:1,end:1,year:1},this._state),this._intro=!!t.intro,this._fragment=function(t,e){var n,i,r,s,l,d,p,b,k,M,D,w,O,x=e.monthDict[e.month].name;function S(e){t.fire("incrementMonth",-1)}function C(e){t.toggleMonthSelectorOpen()}function I(e){t.fire("incrementMonth",1)}for(var N=e.availableMonths,T=[],H=0;H<N.length;H+=1)T[H]=rt(t,it(e,N,H));return{c:function(){n=f("div"),i=f("div"),(r=f("div")).innerHTML='<i class="arrow left svelte-156fqs2"></i>',s=g("\r\n    "),l=f("div"),d=g(x),p=g(" "),b=g(e.year),k=g(" \r\n    "),(M=f("div")).innerHTML='<i class="arrow right svelte-156fqs2"></i>',D=g("\r\n  "),w=f("div");for(var t=0;t<T.length;t+=1)T[t].c();m(r,"click",S),r.className="control svelte-156fqs2",_(r,"enabled",e.canDecrementMonth),m(l,"click",C),l.className="label svelte-156fqs2",m(M,"click",I),M.className="control svelte-156fqs2",_(M,"enabled",e.canIncrementMonth),i.className="heading-section svelte-156fqs2",w.className="month-selector svelte-156fqs2",_(w,"open",e.monthSelectorOpen),n.className="title"},m:function(t,e){h(t,n,e),o(n,i),o(i,r),o(i,s),o(i,l),o(l,d),o(l,p),o(l,b),o(i,k),o(i,M),o(n,D),o(n,w);for(var a=0;a<T.length;a+=1)T[a].m(w,null);O=!0},p:function(e,n){if(e.canDecrementMonth&&_(r,"enabled",n.canDecrementMonth),(e.monthDict||e.month)&&x!==(x=n.monthDict[n.month].name)&&y(d,x),e.year&&y(b,n.year),e.canIncrementMonth&&_(M,"enabled",n.canIncrementMonth),e.month||e.availableMonths){N=n.availableMonths;for(var i=0;i<N.length;i+=1){var s=it(n,N,i);T[i]?T[i].p(e,s):(T[i]=rt(t,s),T[i].c(),T[i].m(w,null))}for(;i<T.length;i+=1)T[i].d(1);T.length=N.length}e.monthSelectorOpen&&_(w,"open",n.monthSelectorOpen)},i:function(t,e){O||this.m(t,e)},o:a,d:function(t){t&&c(n),v(r,"click",S),v(l,"click",C),v(M,"click",I),u(T,t)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor)),this._intro=!0}function at(t){if(this.get().open){var e=t.target;do{if(e==this.refs.popover)return}while(e=e.parentNode);this.close()}}i(st.prototype,N),i(st.prototype,{toggleMonthSelectorOpen:function(){var t=this.get().monthSelectorOpen;t=!t,this.set({monthSelectorOpen:t})},monthSelected:function(t,e){t.stopPropagation(),this.fire("monthSelected",e),this.toggleMonthSelectorOpen()}}),st.prototype._recompute=function(t,e){var n,i,r,s,a,o,h;(t.monthDict||t.start||t.end||t.year)&&this._differs(e.availableMonths,e.availableMonths=(i=(n=e).monthDict,r=n.start,s=n.end,a=n.year,o=r.getFullYear()==a,h=s.getFullYear()==a,i.map(function(t,e){return Object.assign({},t,{selectable:!o&&!h||(!o||e>=r.getMonth())&&(!h||e<=s.getMonth())})})))&&(t.availableMonths=!0)};var ot={getDistanceToEdges:function(){var t=this.get().open;t||this.set({open:!0});var e=this.get(),n=e.translateX,i=e.translateY,r=this.refs.contentsWrapper,s=(r.offsetWidth,r.offsetHeight,r.getBoundingClientRect());return t||this.set({open:!1}),{top:s.top+-1*i,bottom:window.innerHeight-s.bottom+i,left:s.left+-1*n,right:document.body.clientWidth-s.right+n}},getTranslate:function(){var t,e=this.get().w,n=this.getDistanceToEdges();return t=e<480?n.bottom:n.top<0?Math.abs(n.top):n.bottom<0?n.bottom:0,{translateX:n.left<0?Math.abs(n.left):n.right<0?n.right:0,translateY:t}},open:function(){this.set(Object.assign({},{open:!0},this.getTranslate())),this.fire("opened")},close:function(){var t=this;this.set({shrink:!0}),function(t,e,n){t.addEventListener(e,function i(){n.apply(this,arguments),t.removeEventListener(e,i)})}(this.refs.contentsAnimated,"animationend",function(){t.set({shrink:!1,open:!1}),t.fire("closed")})}};function ht(){document.removeEventListener("click",at)}function ct(t){var e=this;C(this,t),this.refs={},this._state=i({open:!1,shrink:!1,translateY:0,translateX:0},t.data),this._state.w=window.innerWidth,this._intro=!!t.intro,this._handlers.destroy=[ht],this._slotted=t.slots||{},this._fragment=function(t,e){var n,i,r,s,u,d,p,y=t._slotted.trigger,k=t._slotted.contents;function M(e){t.set({w:this.innerWidth})}function D(e){t.open()}return window.addEventListener("resize",M),{c:function(){n=f("div"),i=f("div"),r=g("\r\n  "),s=f("div"),u=f("div"),d=f("div"),m(i,"click",D),i.className="trigger",d.className="contents-inner svelte-1qphhwy",u.className="contents svelte-1qphhwy",s.className="contents-wrapper svelte-1qphhwy",b(s,"transform","translate(-50%,-50%) translate("+e.translateX+"px, "+e.translateY+"px)"),_(s,"visible",e.open),_(s,"shrink",e.shrink),n.className="popover svelte-1qphhwy"},m:function(e,a){h(e,n,a),o(n,i),y&&o(i,y),t.refs.triggerContainer=i,o(n,r),o(n,s),o(s,u),o(u,d),k&&o(d,k),t.refs.contentsAnimated=u,t.refs.contentsWrapper=s,t.refs.popover=n,p=!0},p:function(t,e){(t.translateX||t.translateY)&&b(s,"transform","translate(-50%,-50%) translate("+e.translateX+"px, "+e.translateY+"px)"),t.open&&_(s,"visible",e.open),t.shrink&&_(s,"shrink",e.shrink)},i:function(t,e){p||this.m(t,e)},o:a,d:function(e){window.removeEventListener("resize",M),e&&c(n),y&&l(i,y),v(i,"click",D),t.refs.triggerContainer===i&&(t.refs.triggerContainer=null),k&&l(d,k),t.refs.contentsAnimated===u&&(t.refs.contentsAnimated=null),t.refs.contentsWrapper===s&&(t.refs.contentsWrapper=null),t.refs.popover===n&&(t.refs.popover=null)}}}(this,this._state),this.root._oncreate.push(function(){(function(){document.addEventListener("click",at.bind(this));var t=this.get().trigger;t&&this.refs.triggerContainer.appendChild(t.parentNode.removeChild(t))}).call(e),e.fire("update",{changed:r({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),S(this)),this._intro=!0}function lt(t){return function(t,e,n){void 0===n&&(n=null),t.setHours(0,0,0,0),e.setHours(0,0,0,0);for(var i=new Date(e.getFullYear(),e.getMonth()+1,1),r=[],s=new Date(t.getFullYear(),t.getMonth(),1),a=F(t,e,n);s<i;)r.push(Y(s.getMonth(),s.getFullYear(),a)),s.setMonth(s.getMonth()+1);return r}(t.start,t.end,t.selectableCallback)}i(ct.prototype,N),i(ct.prototype,ot),(new Date).setHours(0,0,0,0);var ut={changeMonth:function(t){this.set({month:t})},incrementMonth:function(t,e){var n=this.get(),i=n.canIncrementMonth,r=n.canDecrementMonth,s=n.month,a=n.year;if((1!=t||i)&&(-1!=t||r)){var o=new Date(a,s,1);o.setMonth(o.getMonth()+t),s=o.getMonth(),a=o.getFullYear();var h=new Date(a,s,e||1);this.set({highlighted:h,month:s,year:a})}},getDefaultHighlighted:function(){return new Date(this.get().selected)},incrementDayHighlighted:function(t){var e=this.get(),n=e.highlighted,i=(e.visibleMonth,e.firstVisibleDate),r=e.lastVisibleDate;return(n=new Date(n)).setDate(n.getDate()+t),t>0&&n>r?this.incrementMonth(1,n.getDate()):t<0&&n<i?this.incrementMonth(-1,n.getDate()):void this.set({highlighted:n})},handleKeyPress:function(t){if(-1!=J.indexOf(t.keyCode))switch(t.preventDefault(),t.keyCode){case V.left:this.incrementDayHighlighted(-1);break;case V.up:this.incrementDayHighlighted(-7);break;case V.right:this.incrementDayHighlighted(1);break;case V.down:this.incrementDayHighlighted(7);break;case V.pgup:this.incrementMonth(-1);break;case V.pgdown:this.incrementMonth(1);break;case V.escape:this.close();break;case V.enter:var e=this.get().highlighted;this.registerSelection(e)}},close:function(){this.refs.popover.close(),this.registerClose()},getDay:function(t,e){for(var n=0;n<t.weeks.length;++n)for(var i=0;i<t.weeks[n].days.length;++i)if(j(t.weeks[n].days[i].date,e))return t.weeks[n].days[i];return null},checkIfVisibleDateIsSelectable:function(t){var e=this.get().visibleMonth,n=this.getDay(e,t);return!!n&&n.selectable},shakeDate:function(t){var e=this,n=this.get().shakeHighlightTimeout;clearTimeout(n),this.set({shakeDate:t,shakeHighlightTimeout:setTimeout(function(){return e.set({shakeDate:!1})},700)})},registerSelection:function(t){if(!this.checkIfVisibleDateIsSelectable(t))return this.shakeDate(t);this.close(),this.set({selected:t,dateChosen:!0});var e=this.get(),n=e.trigger,i=e.formattedSelected;this.assignValueToTrigger(n,i)},assignValueToTrigger:function(t,e){t&&this.get().assignmentHandler(t,e)},registerOpen:function(){var t=this.get().selected,e=this.handleKeyPress.bind(this);this.set({keydownListener:e,highlighted:this.getDefaultHighlighted(),month:t.getMonth(),year:t.getFullYear()}),document.addEventListener("keydown",e),this.fire("open")},registerClose:function(){var t=this.get().keydownListener;document.removeEventListener("keydown",t),this.fire("close")}};function dt(t,e,n){var i=Object.create(t);return i.day=e[n],i}function ft(t,e){var n,i;return{c:function(){n=f("button"),i=g(e.formattedSelected),n.className="calendar-button svelte-1u4r5n7"},m:function(t,e){h(t,n,e),o(n,i)},p:function(t,e){t.formattedSelected&&y(i,e.formattedSelected)},d:function(t){t&&c(n)}}}function gt(t,e){var n,i,r=e.day.abbrev;return{c:function(){n=f("span"),i=g(r),n.className="svelte-1u4r5n7"},m:function(t,e){h(t,n,e),o(n,i)},p:function(t,e){t.dayDict&&r!==(r=e.day.abbrev)&&y(i,r)},d:function(t){t&&c(n)}}}function mt(t){var e,n=this;C(this,t),this.refs={},this._state=i({today:e=new Date,dayDict:H,format:"#{m}/#{d}/#{Y}",start:new Date(1987,9,29),end:new Date(2020,9,29),selected:e,highlighted:e,shakeDate:!1,dateChosen:!1,month:e.getMonth(),year:e.getFullYear(),trigger:null,selectableCallback:null,assignmentHandler:function(t,e){t.innerHTML=e}},t.data),this._recompute({start:1,end:1,selectableCallback:1,month:1,year:1,months:1,monthIndex:1,visibleMonth:1,selected:1,format:1},this._state),this._intro=!!t.intro,this._slotted=t.slots||{},this._fragment=function(t,e){var n,i,r,a,m,v,y,b,k,M=t._slotted.default,D={},w=!e.trigger&&ft(0,e),O={month:e.month,year:e.year,start:e.start,end:e.end,canIncrementMonth:e.canIncrementMonth,canDecrementMonth:e.canDecrementMonth},x=new st({root:t.root,store:t.store,data:O});x.on("monthSelected",function(e){t.changeMonth(e)}),x.on("incrementMonth",function(e){t.incrementMonth(e)});for(var S=e.dayDict,C=[],I=0;I<S.length;I+=1)C[I]=gt(0,dt(e,S,I));var N={visibleMonth:e.visibleMonth,selected:e.selected,highlighted:e.highlighted,shakeDate:e.shakeDate,start:e.start,end:e.end,id:e.visibleMonthId},T=new et({root:t.root,store:t.store,data:N});T.on("dateSelected",function(e){t.registerSelection(e)});var H={trigger:e.trigger};void 0!==e.isOpen&&(H.open=e.isOpen,D.open=!0),void 0!==e.isClosing&&(H.shrink=e.isClosing,D.shrink=!0);var Y=new ct({root:t.root,store:t.store,slots:{default:d(),contents:d(),trigger:d()},data:H,_bind:function(e,n){var i={};!D.open&&e.open&&(i.isOpen=n.open),!D.shrink&&e.shrink&&(i.isClosing=n.shrink),t._set(i),D={}}});return t.root._beforecreate.push(function(){Y._bind({open:1,shrink:1},Y.get())}),Y.on("opened",function(e){t.registerOpen(e)}),Y.on("closed",function(e){t.registerClose(e)}),t.refs.popover=Y,{c:function(){n=f("div"),i=f("div"),M||w&&w.c(),r=g("\r\n    "),a=f("div"),m=f("div"),x._fragment.c(),v=g("\r\n        "),y=f("div");for(var t=0;t<C.length;t+=1)C[t].c();b=g("\r\n        "),T._fragment.c(),Y._fragment.c(),p(i,"slot","trigger"),i.className="svelte-1u4r5n7",y.className="legend svelte-1u4r5n7",m.className="calendar svelte-1u4r5n7",p(a,"slot","contents"),a.className="svelte-1u4r5n7",n.className="datepicker svelte-1u4r5n7",_(n,"open",e.isOpen),_(n,"closing",e.isClosing)},m:function(t,e){h(t,n,e),o(Y._slotted.trigger,i),M?o(i,M):w&&w.m(i,null),o(Y._slotted.default,r),o(Y._slotted.contents,a),o(a,m),x._mount(m,null),o(m,v),o(m,y);for(var s=0;s<C.length;s+=1)C[s].m(y,null);o(m,b),T._mount(m,null),Y._mount(n,null),k=!0},p:function(t,r){e=r,M||(e.trigger?w&&(w.d(1),w=null):w?w.p(t,e):((w=ft(0,e)).c(),w.m(i,null)));var s={};if(t.month&&(s.month=e.month),t.year&&(s.year=e.year),t.start&&(s.start=e.start),t.end&&(s.end=e.end),t.canIncrementMonth&&(s.canIncrementMonth=e.canIncrementMonth),t.canDecrementMonth&&(s.canDecrementMonth=e.canDecrementMonth),x._set(s),t.dayDict){S=e.dayDict;for(var a=0;a<S.length;a+=1){var o=dt(e,S,a);C[a]?C[a].p(t,o):(C[a]=gt(0,o),C[a].c(),C[a].m(y,null))}for(;a<C.length;a+=1)C[a].d(1);C.length=S.length}var h={};t.visibleMonth&&(h.visibleMonth=e.visibleMonth),t.selected&&(h.selected=e.selected),t.highlighted&&(h.highlighted=e.highlighted),t.shakeDate&&(h.shakeDate=e.shakeDate),t.start&&(h.start=e.start),t.end&&(h.end=e.end),t.visibleMonthId&&(h.id=e.visibleMonthId),T._set(h);var c={};t.trigger&&(c.trigger=e.trigger),!D.open&&t.isOpen&&(c.open=e.isOpen,D.open=void 0!==e.isOpen),!D.shrink&&t.isClosing&&(c.shrink=e.isClosing,D.shrink=void 0!==e.isClosing),Y._set(c),D={},t.isOpen&&_(n,"open",e.isOpen),t.isClosing&&_(n,"closing",e.isClosing)},i:function(t,e){k||this.m(t,e)},o:function(t){k&&(t=s(t,3),x&&x._fragment.o(t),T&&T._fragment.o(t),Y&&Y._fragment.o(t),k=!1)},d:function(e){e?(c(n),w&&w.d()):l(i,M),x.destroy(),u(C,e),T.destroy(),Y.destroy(),t.refs.popover===Y&&(t.refs.popover=null)}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this.get().selected;this.set({month:t.getMonth(),year:t.getFullYear()})}).call(n),n.fire("update",{changed:r({},n._state),current:n._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),S(this)),this._intro=!0}return i(mt.prototype,N),i(mt.prototype,ut),mt.prototype._recompute=function(t,e){var n,i;(t.start||t.end||t.selectableCallback)&&this._differs(e.months,e.months=lt(e))&&(t.months=!0),(t.month||t.year||t.months)&&this._differs(e.monthIndex,e.monthIndex=function(t){for(var e=t.month,n=t.year,i=t.months,r=0;r<i.length;++r)if(i[r].month==e&&i[r].year==n)return r;return 0}(e))&&(t.monthIndex=!0),(t.monthIndex||t.months)&&this._differs(e.visibleMonth,e.visibleMonth=function(t){var e=t.monthIndex;return t.months[e]}(e))&&(t.visibleMonth=!0),(t.month||t.year)&&this._differs(e.visibleMonthId,e.visibleMonthId=(i=(n=e).month,n.year+i/100))&&(t.visibleMonthId=!0),t.visibleMonth&&(this._differs(e.lastVisibleDate,e.lastVisibleDate=function(t){var e=t.visibleMonth;return e.weeks[e.weeks.length-1].days[6].date}(e))&&(t.lastVisibleDate=!0),this._differs(e.firstVisibleDate,e.firstVisibleDate=function(t){return t.visibleMonth.weeks[0].days[0].date}(e))&&(t.firstVisibleDate=!0)),(t.monthIndex||t.months)&&(this._differs(e.canIncrementMonth,e.canIncrementMonth=function(t){return t.monthIndex<t.months.length-1}(e))&&(t.canIncrementMonth=!0),this._differs(e.canDecrementMonth,e.canDecrementMonth=function(t){var e=t.monthIndex;return t.months,e>0}(e))&&(t.canDecrementMonth=!0)),(t.selected||t.format)&&this._differs(e.formattedSelected,e.formattedSelected=function(t){var e=t.selected,n=t.format;return W(e,n)}(e))&&(t.formattedSelected=!0)},e(),mt}();
//# sourceMappingURL=bundle.js.map
